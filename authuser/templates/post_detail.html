<h1>{{ post.title }}</h1>
<p>{{ post.content|safe }}</p>
<p>By {{ post.author.username }} | {{ post.created_at }}</p>

<form action="{% url 'like-post' post.pk %}" method="POST">
    {% csrf_token %}
    <button type="submit">
        Like ({{ post.total_likes }})
    </button>
</form>

<h3>Comments</h3>
{% for comment in comments %}
    <p>{{ comment.user.username }}: {{ comment.content }}</p>
    {% for reply in comment.replies.all %}
        <p> {{ reply.user.username }}: {{ reply.content }}</p>
    {% endfor %}
    <form method="POST">
        {% csrf_token %}
        <input type="hidden" name="parent_id" value="{{ comment.id }}">
        <textarea name="content" rows="2"></textarea>
        <button type="submit">Reply</button>
    </form>
{% endfor %}

<h4>Add Comment</h4>
<form method="POST">
    {% csrf_token %}
    {{ form.as_p }}
    <button type="submit">Comment</button>
</form>
